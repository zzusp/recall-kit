# `/api/admin/experiences` ç›®å½•ä½¿ç”¨è¯´æ˜

## ğŸ“ ç›®å½•ä½ç½®
`web/src/app/api/admin/experiences/`

## âœ… æ˜¯å¦è¿˜åœ¨ä½¿ç”¨
**æ˜¯çš„ï¼Œè¿™ä¸ªç›®å½•è¿˜åœ¨ä½¿ç”¨ä¸­**

## ğŸ¯ å¯¹åº”é¡µé¢åŠŸèƒ½

### ä¸»è¦ä½¿ç”¨åœºæ™¯

#### 1. **ç®¡ç†å‘˜ä»ªè¡¨æ¿** (`/admin/dashboard`)
- **æ–‡ä»¶**: `web/src/app/admin/dashboard/page.tsx`
- **ç”¨é€”**: è·å–ç»Ÿè®¡æ•°æ®
- **è°ƒç”¨ä½ç½®**: ç¬¬ 41-52 è¡Œ
- **åŠŸèƒ½**: 
  - è·å–æ€»ç»éªŒæ•°
  - è·å–å·²å‘å¸ƒç»éªŒæ•°
  - è·å–å·²åˆ é™¤ç»éªŒæ•°
  - è·å–æœ€è¿‘æäº¤æ•°

```typescript
// åœ¨ dashboard é¡µé¢ä¸­è°ƒç”¨
fetch('/api/admin/experiences?limit=1&page=1', {
  headers: { 'Authorization': `Bearer ${sessionToken}` }
})
```

## ğŸ“‚ ç›®å½•ç»“æ„

### 1. `route.ts` (ä¸»è·¯ç”±)
- **GET**: è·å–æ‰€æœ‰ç”¨æˆ·çš„ç»éªŒåˆ—è¡¨ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰
  - æ”¯æŒåˆ†é¡µ (`page`, `limit`)
  - æ”¯æŒçŠ¶æ€è¿‡æ»¤ (`status`: all, published, draft, deleted, publishing, rejected)
  - æ”¯æŒæœç´¢ (`search`)
  - è¿”å›æ‰€æœ‰ç”¨æˆ·çš„ç»éªŒï¼ˆä¸é™åˆ¶ç”¨æˆ·IDï¼‰

- **POST**: ç®¡ç†å‘˜åˆ›å»ºç»éªŒ
  - åˆ›å»ºç»éªŒæ—¶ä¸éœ€è¦æŒ‡å®š `user_id`ï¼ˆå¯èƒ½ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼‰
  - é»˜è®¤çŠ¶æ€ä¸º `published`

### 2. `[id]/route.ts` (å•ä¸ªç»éªŒæ“ä½œ)
- **PUT**: ç®¡ç†å‘˜æ›´æ–°ä»»ä½•ç»éªŒ
  - å¯ä»¥æ›´æ–° `publish_status` (published/draft)
  - å¯ä»¥æ›´æ–° `is_deleted` (è½¯åˆ é™¤/æ¢å¤)
  
- **DELETE**: ç®¡ç†å‘˜åˆ é™¤ä»»ä½•ç»éªŒ
  - è½¯åˆ é™¤ï¼ˆè®¾ç½® `is_deleted = true`ï¼‰

### 3. `generate-embeddings/route.ts` (æ‰¹é‡æ“ä½œ)
- **POST**: æ‰¹é‡ç”ŸæˆåµŒå…¥å‘é‡
  - ä¸ºæ‰€æœ‰å·²å‘å¸ƒä½†è¿˜æ²¡æœ‰åµŒå…¥å‘é‡çš„ç»éªŒç”ŸæˆåµŒå…¥
  - éœ€è¦ç®¡ç†å‘˜æƒé™
  - è¿”å›å¤„ç†ç»“æœç»Ÿè®¡

## ğŸ”‘ ä¸ `/api/admin/my-experiences` çš„åŒºåˆ«

| ç‰¹æ€§ | `/api/admin/experiences` | `/api/admin/my-experiences` |
|------|-------------------------|----------------------------|
| **æƒé™è¦æ±‚** | ç®¡ç†å‘˜æˆ–è¶…çº§ç”¨æˆ· | ä»»ä½•ç™»å½•ç”¨æˆ· |
| **æ•°æ®èŒƒå›´** | æ‰€æœ‰ç”¨æˆ·çš„ç»éªŒ | å½“å‰ç”¨æˆ·è‡ªå·±çš„ç»éªŒ |
| **ç”¨é€”** | ç®¡ç†å‘˜ç®¡ç†æ‰€æœ‰ç»éªŒ | ç”¨æˆ·ç®¡ç†è‡ªå·±çš„ç»éªŒ |
| **ä½¿ç”¨é¡µé¢** | `/admin/dashboard` (ç»Ÿè®¡) | `/admin/my-experiences` (ä¸ªäººç®¡ç†) |

## ğŸ“Š å½“å‰ä½¿ç”¨æƒ…å†µ

### âœ… æ­£åœ¨ä½¿ç”¨
1. **ç®¡ç†å‘˜ä»ªè¡¨æ¿ç»Ÿè®¡** - è·å–å…¨å±€ç»Ÿè®¡æ•°æ®
2. **ç®¡ç†å‘˜ç»éªŒç®¡ç†** - ç†è®ºä¸Šå¯ä»¥ç”¨äºç®¡ç†å‘˜ç®¡ç†æ‰€æœ‰ç»éªŒï¼ˆä½†å¯èƒ½æ²¡æœ‰ä¸“é—¨çš„é¡µé¢ï¼‰

### âš ï¸ æ½œåœ¨é—®é¢˜
1. **Dashboard é¡µé¢é€»è¾‘é—®é¢˜**: 
   - Dashboard æ˜¾ç¤ºçš„æ˜¯"æ€»ç»éªŒæ•°"ç­‰ç»Ÿè®¡ï¼Œä½†é“¾æ¥æŒ‡å‘çš„æ˜¯ `/admin/my-experiences`
   - åº”è¯¥æœ‰ä¸€ä¸ªä¸“é—¨çš„ç®¡ç†å‘˜ç»éªŒç®¡ç†é¡µé¢ï¼Œæˆ–è€…ä¿®æ”¹é“¾æ¥æŒ‡å‘æ­£ç¡®çš„é¡µé¢

2. **POST æ–¹æ³•ä½¿ç”¨**: 
   - POST æ–¹æ³•å…è®¸ç®¡ç†å‘˜åˆ›å»ºç»éªŒï¼Œä½†é€šå¸¸ç»éªŒåº”è¯¥ç”±ç”¨æˆ·è‡ªå·±åˆ›å»º
   - è¿™ä¸ªåŠŸèƒ½å¯èƒ½ä¸å¤ªå¸¸ç”¨

## ğŸ’¡ å»ºè®®

### é€‰é¡¹ 1: ä¿ç•™å¹¶å®Œå–„
- åˆ›å»ºä¸“é—¨çš„ç®¡ç†å‘˜ç»éªŒç®¡ç†é¡µé¢ (`/admin/experiences`)
- ç”¨äºç®¡ç†å‘˜æŸ¥çœ‹ã€å®¡æ ¸ã€ç®¡ç†æ‰€æœ‰ç”¨æˆ·çš„ç»éªŒ
- ä¿®å¤ dashboard é¡µé¢çš„é“¾æ¥

### é€‰é¡¹ 2: ç®€åŒ–ä½¿ç”¨
- å¦‚æœä¸éœ€è¦ç®¡ç†å‘˜ç®¡ç†æ‰€æœ‰ç»éªŒçš„åŠŸèƒ½
- å¯ä»¥åªä¿ç•™ GET æ–¹æ³•ç”¨äºç»Ÿè®¡
- ç§»é™¤ POSTã€PUTã€DELETE æ–¹æ³•ï¼ˆæˆ–æ ‡è®°ä¸ºæœªä½¿ç”¨ï¼‰

### é€‰é¡¹ 3: é‡æ„
- å°†ç»Ÿè®¡åŠŸèƒ½æå–åˆ°ä¸“é—¨çš„ç»Ÿè®¡ API (`/api/admin/stats`)
- ä¿ç•™ç»éªŒç®¡ç†åŠŸèƒ½åœ¨ `/api/admin/experiences`

## ğŸ” ä»£ç ä½ç½®

### API è·¯ç”±
- `web/src/app/api/admin/experiences/route.ts` - ä¸»è·¯ç”±
- `web/src/app/api/admin/experiences/[id]/route.ts` - å•ä¸ªç»éªŒæ“ä½œ
- `web/src/app/api/admin/experiences/generate-embeddings/route.ts` - æ‰¹é‡ç”ŸæˆåµŒå…¥

### ä½¿ç”¨é¡µé¢
- `web/src/app/admin/dashboard/page.tsx` - ç®¡ç†å‘˜ä»ªè¡¨æ¿ï¼ˆç»Ÿè®¡ä½¿ç”¨ï¼‰

## ğŸ“ æ€»ç»“

**è¿™ä¸ªç›®å½•è¿˜åœ¨ä½¿ç”¨**ï¼Œä¸»è¦ç”¨äºï¼š
1. âœ… ç®¡ç†å‘˜ä»ªè¡¨æ¿çš„ç»Ÿè®¡æ•°æ®è·å–
2. âš ï¸ ç®¡ç†å‘˜ç®¡ç†æ‰€æœ‰ç»éªŒçš„åŠŸèƒ½ï¼ˆä½†å¯èƒ½ç¼ºå°‘å¯¹åº”çš„å‰ç«¯é¡µé¢ï¼‰

å»ºè®®æ ¹æ®å®é™…éœ€æ±‚å†³å®šæ˜¯å®Œå–„åŠŸèƒ½è¿˜æ˜¯ç®€åŒ–ä½¿ç”¨ã€‚

